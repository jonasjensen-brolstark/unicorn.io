version: '3.7'
services:
  image:
    container_name: image-service
    build:
      context: ./src/services/image/
    networks: 
      - services
  profile:
    container_name: profile-service
    build:
      context: ./src/services/profile/
    networks: 
      - services
  pricing:
    container_name: pricing-service
    depends_on: 
      - pricing_db
    build:
      context: ./src/services/pricing/
    ports: 
      - "5000:80"
    networks: 
      - services

  pricing_db:
    image: microsoft/mssql-server-linux
    environment:
      SA_PASSWORD: "Your_password123"
      ACCEPT_EULA: "Y"
    volumes:
      - mssql-server-linux-data:/var/opt/mssql/data
    ports:
      - "1433:1433"
    healthcheck:
      test: /opt/mssql-tools/bin/sqlcmd -S localhost -U sa -P "Your_password123" -Q "SELECT 1" || exit 1
    networks: 
      - services

volumes:
  mssql-server-linux-data: 

networks: 
  frontend:
  backend:
  services: